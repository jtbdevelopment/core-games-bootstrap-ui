!function(t){t.module("coreGamesBootstrapUi.config",[]).value("coreGamesBootstrapUi.config",{debug:!0}),t.module("coreGamesBootstrapUi.templates",[]),t.module("coreGamesBootstrapUi.controllers",[]),t.module("coreGamesBootstrapUi.directives",[]),t.module("coreGamesBootstrapUi.filters",[]),t.module("coreGamesBootstrapUi.services",[]),t.module("coreGamesBootstrapUi",["coreGamesBootstrapUi.config","coreGamesBootstrapUi.directives","coreGamesBootstrapUi.filters","coreGamesBootstrapUi.services","coreGamesBootstrapUi.templates","coreGamesBootstrapUi.controllers","ngResource","ngCookies","ngSanitize","ui.bootstrap"])}(angular),angular.module("coreGamesBootstrapUi.controllers").controller("CoreBootstrapInviteCtrl",["$uibModalInstance","invitableFriends","message","jtbFacebook",function(t,e,a,o){var n=this;n.invitableFriends=e,n.chosenFriends=[],n.message=a,n.invite=function(){var e=[];angular.forEach(n.chosenFriends,function(t){e.push(t.id)}),o.inviteFriends(e,a),t.close()},n.cancel=function(){t.dismiss()}}]),angular.module("coreGamesBootstrapUi.controllers").controller("CoreBootstrapSignedInCtrl",["$location","$rootScope","$cacheFactory",function(t,e,a){function o(){a.get("$http").removeAll()}function n(){console.log("Logged in"),o(),e.$broadcast("login"),t.path("/main")}n()}]),angular.module("coreGamesBootstrapUi.controllers").controller("CoreBootstrapSignInCtrl",["$window","$cookies","jtbFacebook",function(t,e,a){function o(){s.showFacebook=!0,s.showManual=t.location.href.indexOf("localhost")>-1||t.location.href.indexOf("-dev")>-1,s.message=""}function n(){s.showFacebook=!1,s.showManual=!1,s.message="Logging in via Facebook",t.location="/auth/facebook"}var s=this;s.message="Initializing...",s.showFacebook=!1,s.showManual=!1,s.csrf=e["XSRF-TOKEN"],s.fbLogin=function(){a.initiateFBLogin().then(function(t){t.auto?n():o()},function(){o()})},a.canAutoSignIn().then(function(t){t.auto?n():o()},function(){o()})}]),angular.module("coreGamesBootstrapUi.services").factory("jtbBootstrapGameActions",["$http","$location","$uibModal","jtbGameCache","jtbPlayerService",function(t,e,a,o,n){function s(t,e){var a=this;a.errorMessage=e,a.closeError=function(){t.close()}}function i(t,e){var a=this;a.confirmMessage=e,a.takeAction=function(){t.close()},a.cancelAction=function(){t.dismiss()}}function r(t){var e={controller:["$uibModalInstance","message",s],controllerAs:"errorDialog",resolve:{message:function(){return t}}};angular.isDefined(f)?e.templateUrl=f:e.template=b,a.open(e)}function c(t){return n.currentPlayerBaseURL()+"/game/"+t.id+"/"}function l(){}function d(){}function u(t,e){l(),t.success(function(t){d(),o.putUpdatedGame(t),angular.isDefined(e)&&e(t)}).error(function(t,e){console.error(t+"/"+e),d(),v(t)})}function m(t,e,o){var n={controller:["$uibModalInstance","message",i],controllerAs:"confirmDialog",resolve:{message:function(){return t}}};angular.isDefined(h)?n.templateUrl=h:n.template=p,a.open(n).result.then(function(){u(e(),o)})}function g(e,a){return t.put(c(e)+a)}var f,h,b='<div class="game-error-dialog" role="dialog"><div class="modal-header"><h4 class="modal-title">Sorry!</h4></div><div class="modal-body"><span class="error-message">{{errorDialog.errorMessage}}</span></div><div class="modal-footer"><button class="btn btn-default btn-info btn-default-focus close-button" ng-click="errorDialog.closeError()">OK</button></div></div>',p='<div class="game-confirm-dialog"><div class="modal-header"><h4 class="modal-title">{{confirmDialog.confirmMessage}}</h4></div><div class="modal-body"><span class="confirm-message">Are you sure?</span></div><div class="modal-footer"><button class="btn btn-default btn-danger action-button" ng-click="confirmDialog.takeAction()">Yes</button><button class="btn btn-default btn-default btn-default-focus cancel-button" ng-click="confirmDialog.cancelAction()">No</button></div></div>',v=r;return{getErrorHandler:function(){return v},setErrorHandler:function(t){v=t},setConfirmDialogHTMLTemplate:function(t){h=t},setErrorDialogHTMLTemplate:function(t){f=t},getGameURL:function(t){return c(t)},wrapActionOnGame:function(t,e){u(t,e)},wrapConfirmedActionOnGame:function(t,e,a){m(t,e,a)},"new":function(a){this.wrapActionOnGame(t.post(n.currentPlayerBaseURL()+"/new",a),function(t){e.path("/game/"+t.gamePhase.toLowerCase()+"/"+t.id)})},accept:function(t){this.wrapActionOnGame(g(t,"accept"))},reject:function(t){this.wrapConfirmedActionOnGame("Reject this game!",function(){return g(t,"reject")})},declineRematch:function(t){this.wrapConfirmedActionOnGame("Decline further rematches.",function(){return g(t,"endRematch")})},rematch:function(t){this.wrapActionOnGame(g(t,"rematch"),function(t){e.path("/game/"+t.gamePhase.toLowerCase()+"/"+t.id)})},quit:function(t){this.wrapConfirmedActionOnGame("Quit this game!",function(){return g(t,"quit")})}}}]),angular.module("coreGamesBootstrapUi.templates").run(function(t){t.put("views/core-bs/admin/admin-stats.html",'<div class="admin-stats"><div class="row"><table class="table table-striped table-condensed table-admin-states"> <tr> <th></th> <th class="text-right">Last 24 hours</th> <th class="text-right">Last 7 days</th> <th class="text-right">Last 30 days</th> </tr> <tr class="text-right"> <th class="text-left">Total Games</th> <td colspan="3">{{admin.gameCount}}</td> </tr> <tr class="text-right"> <th class="text-left">Games Created</th> <td>{{admin.gamesLast24hours}}</td> <td>{{admin.gamesLast7days}}</td> <td>{{admin.gamesLast30days}}</td> </tr> <tr class="text-right"> <th class="text-left">Total Players</th> <td colspan="3">{{admin.playerCount}}</td> </tr> <tr class="text-right"> <th class="text-left">Players Created</th> <td>{{admin.playersCreated24hours}}</td> <td>{{admin.playersCreated7days}}</td> <td>{{admin.playersCreated30days}}</td> </tr> <tr class="text-right"> <th class="text-left">Players Logged In</th> <td>{{admin.playersLastLogin24hours}}</td> <td>{{admin.playersLastLogin7days}}</td> <td>{{admin.playersLastLogin30days}}</td> </tr> </table> </div> </div>'),t.put("views/core-bs/admin/admin-switchplayer.html",'<div class="admin-user"><div class="row"><div class="col-xs-4"><button class="btn btn-default btn-default-focus btn-success btn-stop-simulating"ng-disabled="!admin.revertEnabled" ng-click="admin.revertToNormal()">Stop</button></div><div class="col-xs-8">{{admin.revertText}}</div></div><div class="row"><div class="col-xs-4"><button class="btn btn-default btn-default-focus btn-primary btn-get-users"ng-click="admin.refreshData()">Get Users</button></div><div class="col-xs-8"><input class="form-control" type="text" ng-model="admin.searchText"placeholder="And Name contains.."></div></div><div class="row"><div class="col-xs-12"><table class="table table-striped table-condensed table-admin-users"><tr><th>Display Name</th><th>ID</th><th>Switch</th></tr><tr ng-repeat="player in admin.players"><td>{{player.displayName}}</td><td>{{player.id}}</td><td><button class="btn btn-danger btn-danger btn-change-user"ng-click="admin.switchToPlayer(player.id)">Switch to this user..</button></td></tr></table></div></div><div class="row"><div class="col-xs-12"><ul uib-pagination num-pages="admin.numberOfPages" items-per-page="admin.pageSize"direction-links="false" total-items="admin.totalItems" ng-model="admin.currentPage"ng-change="admin.changePage()"></ul></div></div></div>'),t.put("views/core-bs/admin/admin.html",'<div class="admin-screen"><div class="row"><div class="col-xs-8 col-xs-offset-2"><uib-tabset type="tabs" justified="true"><uib-tab heading="Stats"><div ng-include="\'views/core-bs/admin/admin-stats.html\'"></div></uib-tab><uib-tab heading="Switch player"><div ng-include="\'views/core-bs/admin/admin-switchplayer.html\'"></div></uib-tab></uib-tabset></div></div></div>')});